# ğŸ“Œsynchronizedë¥¼ ì´ìš©í•œ ë™ê¸°í™”ì™€ ë½ì˜ ë‹¨ìœ„

# 1. ì“°ë ˆë“œì˜ ë™ê¸°í™”

ì‹±ê¸€ì“°ë ˆë“œì˜ í”„ë¡œì„¸ìŠ¤ì˜ ê²½ìš° í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì‘ì—…í•˜ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ì˜ ìì›ì„ ê°€ì§€ê³  ì‘ì—…í•˜ëŠ” ë¬¸ì œê°€ ì—†ì§€ë§Œ, ë©€í‹° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ì˜ ê²½ìš° ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì˜ ìì›ì„ ê³µìœ í•´ ì‘ì—…í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œì˜ ì‘ì—…ì— ì˜í–¥ì„ ì¤€ë‹¤. ë§Œì•½ì— `ì“°ë ˆë“œ A`ê°€ ì‘ì—…í•˜ë˜ ë„ì¤‘ì— ë‹¤ë¥¸ `ì“°ë ˆë“œB`ì—ê²Œ ì œì–´ê¶Œì´ ë„˜ì–´ê°”ì„ ë•Œ `ì“°ë ˆë“œ A`ê°€ ì‘ì—…í•˜ë˜ ê³µìœ ë°ì´í„°ë¥¼ `ì“°ë ˆë“œ B`ê°€ ë³€ê²½í•˜ì˜€ë‹¤ë©´ ë‹¤ì‹œ `ì“°ë ˆë“œ A`ê°€ ì œì–´ê¶Œì„ ë°›ì•„ì„œ ë‚˜ë¨¸ì§€ ì‘ì—…ì„ ë§ˆì³¤ì„ ë•Œ ì›ë˜ ì˜ë„í–ˆë˜ ê²ƒê³¼ëŠ” ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì¼ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í•œ ì“°ë ˆë“œê°€ íŠ¹ì • ì‘ì—…ì„ ëë§ˆì¹˜ê¸° ì „ê¹Œì§€ ë‹¤ë¥¸ ì“°ë ˆë“œì— ì˜í•´ ë°©í•´ë°›ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤. ê·¸ë˜ì„œ ë„ì…ëœ ê°œë…ì´ `ì„ê³„ì˜ì—­(critical section)`ê³¼ `ì ê¸ˆ(ë½, lock)`ì´ë‹¤.

**ì„ê³„ì˜ì—­ì€ ë‘˜ ì´ìƒì˜ ì“°ë ˆë“œê°€ ê³µìœ  ìì›ì— ì ‘ê·¼í•  ë•Œ ì˜¤ì§ í•œ ì“°ë ˆë“œë§Œ ì ‘ê·¼ì„ ë³´ì¥í•˜ëŠ” ì˜ì—­ì„ ë§í•œë‹¤.** ë˜í•œ ëª¨ë“  ê°ì²´ëŠ” `ë½(lock)`ì„ ê°–ê³  ìˆë‹¤. ëª¨ë“  ê°ì²´ê°€ ê°–ê³  ìˆìœ¼ë‹ˆ ê³ ìœ ë½(Intrinsic Lock)ì´ë¼ê³  í•˜ë©° ëª¨ë‹ˆí„° ë½ ë˜ëŠ” ëª¨ë‹ˆí„° ë¼ê³  ë¶€ë¥´ê¸°ë„í•œë‹¤.

ê³µìœ  ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ ì˜ì—­ì„ ì„ê³„ì˜ì—­ìœ¼ë¡œ ì§€ì •í•˜ê³  ê³µìœ  ë°ì´í„°(ê°ì²´)ê°€ ê°€ì§€ê³  ìˆëŠ” `Lock`ì„ íšë“í•œ ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì´ ì˜ì—­ ë‚´ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ì“°ë ˆë“œê°€ ì„ê³„ì˜ì—­ ë‚´ì˜ ëª¨ë“  ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ê³  ë²—ì–´ë‚˜ì„œ `lock`ì„ ë°˜ë‚©í•´ì•¼ë§Œ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ë°˜ë‚©ëœ `lock`ì„ íšë“í•´ ì„ê³„ì˜ì—­ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ëœë‹¤. **ì´ë ‡ê²Œ í•œ ì“°ë ˆë“œê°€ ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì„ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ê°„ì„­í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ëŠ” ê²ƒì„ ì“°ë ˆë“œì˜ `ë™ê¸°í™”(syncronization)`ë¼ê³  í•œë‹¤.**

ìë°”ì—ì„œëŠ” `synchronized` ë¸”ëŸ­ì„ ì´ìš©í•œ ë™ê¸°í™”ë¥¼ ì§€ì›í–ˆì§€ë§Œ, `JDK 1.5`ë¶€í„° `java.util.concurrent.locks` ì™€ `java.util.concurrent.atomic` ì„ í†µí•œ ë‹¤ì–‘í•œ ë™ê¸°í™” ë°©ì‹ì„ ì§€ì›í•œë‹¤

### ë™ì‹œì„±

ë™ì‹œì„±ì€ í•˜ë‚˜ì˜ ì½”ì–´ì—ì„œ ì—¬ëŸ¬ ì“°ë ˆë“œë¥¼ ë²ˆê°ˆì•„ ì‘ì—…í•˜ë©´ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¦‰ ë™ì‹œì— í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒì„ ë§í•œë‹¤.  ë”°ë¼ì„œ ë©€í‹°ì“°ë ˆë“œì—ì„œ ê³µìœ í•˜ëŠ” ì˜ì—­ì´ ë§ì•„ `context switching` ë¹„ìš©ì´ ì‘ë‹¤ëŠ” ì ì´ ì¥ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ ìì›ì„ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ë‹¨ì ë„ ì¡´ì¬í•œë‹¤. ê·¸ê²Œ ë°”ë¡œ ë™ì‹œì„± ì´ìŠˆì´ë‹¤.

ì—¬ëŸ¬ ê°€ì§€ ì“°ë ˆë“œê°€ â€œë™ì‹œì—â€ í•˜ë‚˜ì˜ ìì›ì— ê³µìœ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— `ê²½ìŸìƒíƒœ(race condition)`ê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.  ì´ëŸ° ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì—ëŠ” ëŒ€í‘œì ìœ¼ë¡œ **ë™ê¸°í™”, volatile í‚¤ì›Œë“œ , ì›ìì  ì—°ì‚°(Atomic)** ì´ ìˆëŠ”ë° ì—¬ê¸°ì„œëŠ” ë™ê¸°í™”ì— ëŒ€í•´ ì´ì•¼ê¸°í•  ê²ƒì´ë‹¤.

# 2. Synchronizedë¥¼ ì´ìš©í•œ ë™ê¸°í™”

ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ `synchronized` í‚¤ì›Œë“œë¥¼ ì´ìš©í•œ ë™ê¸°í™” ë°©ì‹ì—ëŠ” 2ê°€ì§€ê°€ ìˆë‹¤.

### **2.1 ë©”ì„œë“œ ì˜ì—­ ì „ì²´ë¥¼ ì„ê³„ì˜ì—­ìœ¼ë¡œ ì§€ì •**

ì“°ë ˆë“œëŠ” `syncrhonized` ë©”ì†Œë“œê°€ í˜¸ì¶œëœ ì‹œì ë¶€í„° í•´ë‹¹ **ë©”ì†Œë“œê°€ í¬í•¨ëœ ê°ì²´ì˜ lockì„ ì–»ì–´** ì‘ì—…ì„ ìˆ˜í–‰í•˜ë‹¤ê°€ ë©”ì†Œë“œê°€ ì¢…ë£Œë˜ë©´ lockì„ ë°˜í™˜í•œë‹¤.

```java
public syncronized void calcSum(){ //ë©”ì„œë“œ ì „ì²´ê°€ ì„ê³„ì˜ì—­

}
```

### **2.2 íŠ¹ì •í•œ ì˜ì—­ì„ ì„ê³„ ì˜ì—­ìœ¼ë¡œ ì§€ì •**

ë©”ì†Œë“œ ë‚´ì— ì½”ë“œ ì¼ë¶€ë¥¼ `ë¸”ëŸ­{}` ìœ¼ë¡œ ê°ì‹¸ê³  ë¸”ëŸ­ ì•ì— `synchronized(ì°¸ì¡°ë³€ìˆ˜)` ë¥¼ ë¶™ì´ëŠ” ë°©ë²•ìœ¼ë¡œ  ì´ë•Œ ì°¸ì¡°ë³€ìˆ˜ëŠ” ë½ì„ ê±¸ê³ ì í•˜ëŠ” ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒì´ì–´ì•¼ í•œë‹¤. ì´ ë¸”ëŸ­ì˜ ì˜ì—­ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ë©´ì„œë¶€í„° ì“°ë ˆë“œëŠ” ì§€ì •ëœ ê°ì²´ì˜ `lock`ì„ ì–»ê²Œ ë˜ê³  ì´ ë¸”ëŸ­ì„ ë²—ì–´ë‚˜ë©´ `lock`ì„ ë°˜í™˜í•œë‹¤.

```java
public void method(...) {
		syncronized(ê°ì²´ì˜ ì°¸ì¡°ë³€ìˆ˜){
	}
}

```

ê·¸ë¦¬ê³  ì´ `synchronized` ë¸”ë¡ì€ **2ê°€ì§€ì˜ ì‚¬ìš©ë°©ë²•**ì´ ì¡´ì¬í•œë‹¤.

### **synchronized(this)**

```java
public class Block1 {

    public static void main(String[] args) {
        Block1 block = new Block1();

        //ëŒë‹¤ì‹ìœ¼ë¡œ ì“°ë ˆë“œ1 ìƒì„±
        Thread thread1 = new Thread(
                () -> {
                    System.out.println("ì“°ë ˆë“œ ì‹œì‘1 :" + LocalDateTime.now());
                    block.syncBlockMethod1("ì“°ë ˆë“œ1");
                    System.out.println("ì“°ë ˆë“œ 1 ì¢…ë£Œ" + LocalDateTime.now());
                }
        );

        //ëŒë‹¤ì‹ìœ¼ë¡œ ì“°ë ˆë“œ2 ìƒì„±
        Thread thread2 = new Thread(
                () -> {
                    System.out.println("ì“°ë ˆë“œ ì‹œì‘2 :" + LocalDateTime.now());
                    block.syncBlockMethod2("ì“°ë ˆë“œ2");
                    System.out.println("ì“°ë ˆë“œ 2 ì¢…ë£Œ" + LocalDateTime.now());
                }
        );

        thread1.start();
        thread2.start();

    }

    private void syncBlockMethod1(String msg) {
        synchronized (this) { //thisëŠ” Block1 ì˜ ê°ì²´ë¥¼ ë§í•¨.
            System.out.println(msg + "ì˜ syncBlockMethod1 ì‹¤í–‰ ì¤‘" + LocalDateTime.now());

            try {
                TimeUnit.SECONDS.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    private void syncBlockMethod2(String msg) {
        synchronized (this) { //thisëŠ” Block1 ì˜ ê°ì²´ë¥¼ ë§í•¨.
            System.out.println(msg + "ì˜ syncBlockMethod2 ì‹¤í–‰ ì¤‘" + LocalDateTime.now());

            try {
                TimeUnit.SECONDS.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

```

<img width="712" alt="1" src="https://github.com/princenim/TIL/assets/59499600/88810f0d-0e7a-4e9f-ab19-645393245f6b">

```java
//ê²°ê³¼
ì“°ë ˆë“œ ì‹œì‘2 :2024-02-08T16:45:23.262817
ì“°ë ˆë“œ ì‹œì‘1 :2024-02-08T16:45:23.262817
ì“°ë ˆë“œ2 ì˜ syncBlockMethod2 ì‹¤í–‰ ì¤‘2024-02-08T16:45:23.264809
ì“°ë ˆë“œ 2 ì¢…ë£Œ2024-02-08T16:45:28.282979
ì“°ë ˆë“œ1 ì˜ syncBlockMethod1 ì‹¤í–‰ ì¤‘2024-02-08T16:45:28.282979
ì“°ë ˆë“œ 1 ì¢…ë£Œ2024-02-08T16:45:33.284676
```

ë¨¼ì € `this`ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤. ì¦‰ í´ë˜ìŠ¤ê°€ ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í–ˆì„ë•ŒëŠ” thisëŠ” ì„œë¡œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.   `sybchronized` ë¸”ë¡ì— `this`ë¥¼ ì‚¬ìš©í•˜ë©´ ëª¨ë“  `synchronized` ë¸”ë¡ì— í•˜ë‚˜ì˜ ê°ì²´ì— ê°™ì€ ë½ì„ ì‚¬ìš©í•˜ë¯€ë¡œ í•œ `synchronized` ë¸”ëŸ­ì´ ëë‚˜ê³  ë½ì´ ë°˜í™˜ë ë•Œê¹Œì§€ ë‹¤ë¥¸ ëª¨ë“  `synchronized`  ë¸”ë¡ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

ë”°ë¼ì„œ  ë¸”ë¡ë§ˆë‹¤ ë‹¤ë¥¸ ë½ì„ ê°–ê²Œ í•˜ëŠ” ë°©ë²•ì´ `synchronized(Object)`ë°©ì‹ì´ë‹¤.

### **synchronized(Object)**

```java
public class Block2 {

    private final Object o1 = new Object();
    private final Object o2 = new Object();

    public static void main(String[] args) {
        Block2 block = new Block2();

        //ëŒë‹¤ì‹ìœ¼ë¡œ ì“°ë ˆë“œ1 ìƒì„±
        Thread thread1 = new Thread(
                () -> {
                    System.out.println("ì“°ë ˆë“œ ì‹œì‘1 :" + LocalDateTime.now());
                    block.syncBlockMethod1("ì“°ë ˆë“œ1");
                    System.out.println("ì“°ë ˆë“œ 1 ì¢…ë£Œ" + LocalDateTime.now());
                }
        );

        //ëŒë‹¤ì‹ìœ¼ë¡œ ì“°ë ˆë“œ2 ìƒì„±
        Thread thread2 = new Thread(
                () -> {
                    System.out.println("ì“°ë ˆë“œ ì‹œì‘2 :" + LocalDateTime.now());
                    block.syncBlockMethod2("ì“°ë ˆë“œ2");
                    System.out.println("ì“°ë ˆë“œ 2 ì¢…ë£Œ" + LocalDateTime.now());
                }
        );

        thread1.start();
        thread2.start();

    }

    private void syncBlockMethod1(String msg) {
        synchronized (o1) { //o1ì´ë¼ëŠ” ì´ë¦„ì˜ ê°ì²´ ë½ì„ ê°€ì§
            System.out.println(msg + " ì˜ syncBlockMethod1 ì‹¤í–‰ ì¤‘" + LocalDateTime.now());

            try {
                TimeUnit.SECONDS.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    private void syncBlockMethod2(String msg) {
        synchronized (o2) { //o2ë¼ëŠ” ì´ë¦„ì˜ ê°ì²´ ë½ì„ ê°€ì§
            System.out.println(msg + " ì˜ syncBlockMethod2 ì‹¤í–‰ ì¤‘" + LocalDateTime.now());

            try {
                TimeUnit.SECONDS.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

```

<img width="711" alt="2" src="https://github.com/princenim/TIL/assets/59499600/461b8e26-b719-4360-9fed-66dbd34b22d5">

ì´ë ‡ê²Œ `this`ê°€ ì•„ë‹Œ ê°ì²´ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ ë¸”ëŸ­ì´ ê°–ëŠ” ê°ì²´ì˜ ë½ì„ ë‹¤ë¥´ê²Œ í•´ì£¼ë©´ `synchronized ë¸”ë¡`ì€ ì„œë¡œ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ì´ë•Œ ë§Œë“œëŠ” `o1`, `o2`ëŠ” ë½ì„ ìœ„í•´ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì„ì‹œê°ì²´ì´ë¯€ë¡œ ì–´ëŠê²ƒìœ¼ë¡œ ë§Œë“¤ì–´ë„ ìƒê´€ì—†ë‹¤.

ì¦‰ ì •ë¦¬í•˜ë©´ `this` ë°©ì‹ì€ ëª¨ë“  ë¸”ëŸ­ì— lockì´ ê±¸ë¦¬ë¯€ë¡œ ìƒí™©ì— ë”°ë¼ ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ìˆë‹¤. í•˜ì§€ë§Œ Object ë°©ì‹ì€ ë¸”ë¡ë§ˆë‹¤ ë‹¤ë¥¸ lockì„ ê±¸ë¦¬ê²Œ í•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

# 3. ë½

ìœ„ì—ì„œ ê³„ì† ë½ì— ëŒ€í•´ ì´ì•¼ê¸°í–ˆëŠ”ë° ë½ì— ëŒ€í•´ ì¢€ë” ìì„¸íˆ ì•Œì•„ë³´ì.

`synchronized ë¸”ëŸ­`ì´ë¼ëŠ” í•˜ë‚˜ì˜ ì˜ì—­ì—ì„œ í•œ ì“°ë ˆë“œê°€ ì‘ì—…ì„ í•˜ë ¤ê³  í•˜ë©´ ë‹¤ë¥¸ ì“°ë ˆë“œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

ì¦‰ ì´ë§ì€ ëˆ„êµ°ê°€ê°€ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì»¨íŠ¸ë¡¤ì„ í•´ì•¼ì¤˜ì•¼í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ì´ë¥¼ ìë°”ì—ì„œëŠ” `lock(intrinsic lock)` ì´ë¼ê³  í•˜ë©° `monitor lock(ëª¨ë‹ˆí„° ë½)` ë˜ëŠ” `monitor(ëª¨ë‹ˆí„°)`ì´ë¼ê³  ë¶€ë¥´ê¸°ë„í•œë‹¤.  ì´ ë½ì€ ëª¨ë“  ê°ì²´ì— í•˜ë‚˜ì”© ì¡´ì¬í•œë‹¤.

ì¢€ ë” ì‰½ê²Œ ìƒê°í•˜ë©´ í™”ì¥ì‹¤ì„ ìƒê°í•˜ë©´ ëœë‹¤. í™”ì¥ì‹¤(ì„ê³„ì˜ì—­)ì— ë“¤ì–´ê°€ë©´ ë¬¸ì„ ìë¬¼ì‡ (ë½)ë¡œ ì ê¶ˆì•¼ì§€ ë‹¤ë¥¸ ì‚¬ëŒ(ì“°ë ˆë“œ)ì´ ëª» ë“¤ì–´ì˜¨ë‹¤. **ğŸ˜¦**

## 3.1 ë½ì˜ ë‹¨ìœ„

ìœ„ ì„¤ëª…í•œ ë½ì€ ëª¨ë‘ `Object ë ˆë²¨ì˜ ë½`ì´ë‹¤. í•˜ì§€ë§Œ ë˜ë‹¤ë¥¸ `í´ë˜ìŠ¤ ë ˆë²¨ì˜ ë½`ì´ ì¡´ì¬í•œë‹¤.

1. **Object level lock**

```java
private void syncBlockMethod1(String msg) {
        synchronized (this) { //this level
    }
}
```

í´ë˜ìŠ¤ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ê°ìì˜ `lock`ë¥¼ ê°€ì§„ë‹¤.

2. **Class level lock**

```java
private void syncBlockMethod1(String msg) {
        synchronized (Block1.class) { //Class level
    }
}
```

í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì—¬ëŸ¬ê°œ ìˆì–´ë„ í•˜ë‚˜ì˜ lockì„ ê°€ì§„ë‹¤.  í´ë˜ìŠ¤ í•˜ë‚˜ë‹¹ í•˜ë‚˜ì˜ lockì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.   ì˜ˆë¥¼ë“¤ì–´ ìœ„ì˜ ì˜ˆì œì—ì„œ `Block1` ì´ë¼ëŠ” í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìˆ˜ì‹­ê°œ ë§Œë“¤ì—ˆì„ ë•Œ ëª¨ë“  ê°ì²´ì— ëŒ€í•´ì„œ ë™ì¼í•œ ë½ì„ í•˜ë‚˜ë§Œ ì£¼ê³ ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤. ì¦‰  í´ë˜ìŠ¤ ë ˆë²¨ì´ ê°ì²´ë ˆë²¨ë³´ë‹¤ ë” ë²”ìœ„ê°€ í¬ë‹¤ .

```java
public class Block3 implements Runnable {

    @Override
    public void run() {
        syncBlockMethod1();
    }

    private void syncBlockMethod1() {
        synchronized (Block3.class) { //Class level lock

            System.out.println("in block " + Thread.currentThread().getName() + " ì‹œì‘");

            try {
                TimeUnit.SECONDS.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            System.out.println("in block " + Thread.currentThread().getName() + " ë");
        }
    }

    public static void main(String[] args) {
        Block3 block1 = new Block3();
        Thread thread1 = new Thread(block1);
        Thread thread2 = new Thread(block1);

        Block3 block2 = new Block3();
        Thread thread3 = new Thread(block2);

        //ì“°ë ˆë“œ ì´ë¦„
        thread1.setName("thread1");
        thread2.setName("thread2");
        thread3.setName("thread3");

        thread1.start();
        thread2.start();
        thread3.start();

    }
}
```

```java
in block thread1 ì‹œì‘
in block thread1 ë
in block thread3 ì‹œì‘
in block thread3 ë
in block thread2 ì‹œì‘
in block thread2 ë
```

ìœ„ì˜ ì½”ë“œëŠ” `í´ë˜ìŠ¤ ë ˆë²¨ì˜ ë½`ì„ ì‚¬ìš©í•œ ì˜ˆì œì´ë‹¤.  `Block3`ì´ë¼ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ `block1`,`block2` 2ê°œë¥¼ ìƒì„±í–ˆì§€ë§Œ ë½ì´ í´ë˜ìŠ¤ ë ˆë²¨ë¡œ ì„¤ì •ë˜ì–´ ëª¨ë‘ ê°™ì€ ë½ì„ ê°–ê²Œë˜ì–´ì„œ ìˆœì„œëŒ€ë¡œ ì‹œí–‰ë˜ëŠ” ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤.

ë§Œì•½ì— ìœ„ì˜ ì½”ë“œë¥¼ ë‹¨ìˆœíˆ `this`ë¡œ ë°”ê¾¸ë©´ ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ê°ì²´ë¥¼ ê°–ê²Œë˜ì–´ ì„œë¡œ ë‹¤ë¥¸ ë½ì„ ê°–ê²Œë˜ê³  ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.